# 1. 관계형 데이터베이스의 구성 요소

### A. 테이블 (관계 Relation)

관계형 데이터베이스는 데이터를 2차원 표 형태로 저장하고 관리한다. 표 형태의 데이터 저장 공간을 테이블이라고 한다.

가로줄을 행(row), 세로줄을 열(column)이라 부른다.

![](/Study/image/관계형데이터베이스와오라클데이터베이스_테이블.png)

##### a. 행 (Row) (튜플 tuple, 레코드 record)

하나의 개체를 구성하는 여러 값을 가로로 늘어뜨린 형태

![](/Study/image/관계형데이터베이스와오라클데이터베이스_행.png)

##### b. 열 (Column) (애트리뷰트 attribute, 필드 field)

저장하려는 데이터를 대표하는 이름과 공통 특성을 정의한다.

저장 정보의 종류(자료형)와 저장 가능한 값의 최대 길이 그리고 값의 중복을 허용하지 않는 등의 저장 조건과 범위를 지정할 수 있다.

![](/Study/image/관계형데이터베이스와오라클데이터베이스_열.png)

##### c. 관계형 데이터베이스와 테이블

관계란 행과 열의 특성에 맞추어 데이터를 저장한 테이블 하나하나를 의미한다. 여러 테이블의 구성과 관계를 잘 규정하고 관리하는 것이 관계형 데이터베이스에서 데이터를 관리하는 핵심이다.

### B. 특별한 의미를 지닌 열, 키

키(key)는 수많은 데이터를 구별할 수 있는 유일한 값이라는 뜻이다. 하나의 테이블을 구성하는 여러 열 중에서 특별한 의미를 지닌 하나 또는 여러 열의 조합을 의미한다.

종류별로 데이터를 구별하거나 테이블 간의 연관 관계를 표현할 때 키로 지정한 열을 사용한다.

##### a. 기본키 (PK : Primary Key)

가장 중요한 키로서 한 테이블 내에서 중복되지 않는 값만 가질 수 있는 키이다.

| 기본키의 속성                                             |
| --------------------------------------------------------- |
| 테이블에 저장된 행을 식별할 수 있는 유일한 값이어야 한다. |
| 값의 중복이 없어야 한다.                                  |
| NULL 값을 가질 수 없다.                                   |

기본키는 중복되지 않는 유일한 값이라는 특성을 가졌기 때문에 하나 또는 여러 열의 조합으로 만들 수 있다.

대부분의 경우 개인 정보 노출이 가장 적은 데이터를 기본키로 선정한다.

![](/Study/image/관계형데이터베이스와오라클데이터베이스_기본키.png)

##### b. 보조키, 대체키 (alternate key)

후보키(candidate key)에 속해 있는 키. 후보키 중에서 기본키로 지정되지 않은 열.

> 후보키
> 
> 기본키가 될 수 있는 모든 키를 의미한다.

- 후보키
	- 기본키
	- 보조키
		- 후보키 중 기본키로 지정되지 않은 키

유일한 데이터를 가지고 있고 빈 값(NULL)이 없는 열은 기본키가 될 수 있는 후보키이다.

![](/Study/image/관계형데이터베이스와오라클데이터베이스_후보키.png)

##### c. 외래키 (Foreign Key)

특정 테이블에 포함되어 있으면서 다른 테이블의 기본키로 지정된 키

![](/Study/image/관계형데이터베이스와오라클데이터베이스_외래키.png)

외래키는 테이블을 두 개로 따로 나누어 데이터를 사용하므로 번거로워 보일 수 있다. 하지만 학과 코드를 외래키로 쓰지 않고 하나의 학생 정보 테이블에 저장한다고 생각해보자. 같은 학과 학생인 경우에 똑같은 내용의 학과 데이터가 저장되기 때문에 엄청난 양의 중복 데이터가 저장되는 현상이 발생한다.

시간이 지날수록 데이터 중복에 따른 처리 비용이 증가한다. 저장 공간 크기와 관리는 비용과 밀접한 관련이 있기 때문에 데이터 중복은 어쩔 수 없는 상황이 아닌 이상 반드시 피해야 한다.

관계형 테이터베이스에서는 엑셀처럼 여러 행에 걸쳐 특정 열을 병합하는 것이 기본적으로 불가능하다. 외래키를 사용하면 이러한 병합과 유사항 효과를 얻을 수 있어 데이터 중복을 최소화할 수 있다.

> 응용 프로그램을 만들 때 데이터의 구조 및 설계가 외래키를 사용해 너무 엄격하게 정의하면 응용 프로그램의 제작과 테스트 진행에 걸림돌이 되기도 한다.
> 
> 테이블 사이의 관계를 **느슨하게** 설계하여 이를 응용 프로그램 영역에서 처리하는 경우도 종종 발생한다.

##### d. 복합키 (Composite key)

여러 열을 조합하여 기본키 역할을 할 수 있게 만든 키를 뜻한다. 복합키는 적게는 두세 개, 많게는 열 개가 넘는 열을 조합하기도 한다. 하나의 열만으로 행을 식별하는 것이 불가능하여 두 개 이상의 열 값을 함께 사용해야 각 행이 유일한 데이터로서 가치를 지니기 때문이다.

![](/Study/image/관계형데이터베이스와오라클데이터베이스_복합키.png)

같은 과목을 여러 교수가 다른 강의 시간에 가르친다면 같은 과목 코드에 담당 교수가 다른 경우가 생긴다. 담당 교수를 기본키로 정한다면 한 교수가 서로 다른 과목을 가르치는 경우에 테이블 행을 정확히 구분하는 것이 불가능하다. 

이때 각 과목별 과목 코드와 담당 교수 열, 강의 시간 열을 조합하여 하나의 키로 지정하면 과목 정보 테이블의 행을 정확히 구분하는 것이 가능하다. `과목 코드 + 담당 교수 + 강의 시간`이 기본키 역할을 하게 된다.

# 2. 오라클 데이터베이스

오라클 데이터베이스는 대표적인 상용 관계형 데이터베이스 제품이다.

### A. 오라클 데이터베이스와 버전

오라클 데이터베이스는 오라클 사가 만든 DBMS 제품이다.

오라클 데이터베이스의 가장 최신 버전은 2018년에 출시된 18c 버전이다. 현업에서 데이터베이스를 한번 구축하면 버전 업그레이드가 쉽지 않기 때문에 아직도 많은 기업에서 11g를 사용한다.

### A. 자료형

| 자료형                                  | 설명                                                                                                                                                                        |
| --------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| VARCHAR2(길이)                          | 4000byte만큼의 가변 길이 문자열 데이터를 저장할 수 있다. (최소 크기는 1byte)                                                                                                |
| NUMBER(전체 자릿수, 소수점 이하 잘릿수) | +-38자릿수의 숫자를 저장할 수 있다. NUMBER(p, s)와 같이 표기할 경우 s자리만큼 소수점 이하 자릿수를 표현하고, 이 소수점 자리를 포함한 전체 p자리만큼 숫자 데이터를 저장한다. |
| DATE                                    | 날짜 형식을 저장하기 위해 사용하는 자료형으로 세기, 연, 월, 일, 시, 분, 초 저장이 가능하다.                                                                                 |
| CHAR(길이)                              | 4000byte만큼의 고정 길이 문자열 데이터를 저장할 수 있다. (최소 크기는 1byte)                                                                                                |
| NVARCHAR2(길이)                         | 4000byte만큼의 가변 길이 국가별 문자 세트 데이터를 저장할 수 있다. (최소 크기는 1byte)                                                                                      |
| BLOB                                    | 최대 크기 4GB의 대용량 이진 데이터를 저장할 수 있다.                                                                                                                        |
| CLOB                                    | 최대 크기 4GB의 대용량 텍스트 데이터를 저장할 수 있다.                                                                                                                        |
| BFILE                                   | 최대 크기 4GB의 대용량 이진 데이터 파일을 저장할 수 있다.                                                                                                                                                                            |

자료형은 테이블을 구성하는 열에 지정한다.

NUMBER(4)로 지정한 열에는 네 자리 숫자만 저장할 수 있다. 문자열을 저장할 수 없고 다섯 자리 숫자를 저장할 수 없다.

하나의 자료형에 맞춰 한 종류의 데이터를 저장할 수 있는 자료형을 스칼라(scalar)형이라고 한다.

자료형은 여러 종류가 있으며 한 번에 여러 데이터를 저장할 수 있는 VARRAY, NESTED TABLE 같은 컬렉션(collection)형도 있다. 8버전 이후의 오라클 데이터베이스는 객체 관계형 데이터베이스를 지원하기 위해 여러 자료형을 추가했다.

### B. 객체

데이터를 저장하고 관리하기 위한 논리 구조를 가진 구성 요소

| 객체                 | 설명                                                                                     |
| -------------------- | ---------------------------------------------------------------------------------------- |
| 테이블 (table)       | 데이터를 저장하는 장소                                                                   |
| 인덱스 (index)       | 테이블의 검색 효율을 높이기 위해 사용함                                                  |
| 뷰 (view)            | 하나 또는 여러 개의 선별된 데이터를 논리적으로 연결하여 하나의 테이블처럼 사용하게 해 줌 |
| 시퀀스 (sequence)    | 일련 번호를 생성해 줌                                                                    |
| 시노님 (synonym)     | 오라클 객체의 별칭(다른 이름)을 지정함                                                   |
| 프로시저 (procedure) | 프로그래밍 연산 및 기능 수행이 가능함 (반환 값 없음)                                     |
| 함수 (function)      | 프로그래밍 연산 및 기능 수행이 가능함 (반환 값 있음)                                     |
| 패키지 (package)     | 관련 있는 프로시저와 함수를 보관함                                                       |
| 트리거 (trigger)     | 데이터 관련 작업의 연결 및 방지 관련 기능을 제공함                                       |

### C. PL/SQL

여러 관계형 데이터베이스에서 데이터를 관리하기 위해 복잡한 기능이 필요할 때 기존 SQL만으로  이를 구현하는 것은 다소 한계가 있다. 오라클 데이터베이스는 데이터를 관리를 위해 별도의 프로그래밍 언어를 제공하는데 이를 PL/SQL (Procedural Language extension to SQL)이라고 한다.

오라클 데이터베이스 프로그래밍이라고 하면 SQL문과 PL/SQL을 사용하여 프로그램을 제작하는 것을 의미한드. PL/SQL을 사용하면 변수, 조건문, 반복문 등 프로그래밍 언어에서 제공하는 요소를 사용하여 데이터를 관리할 수 있다.


# 참고문헌

이지훈, "Do it! 오라클로 배우는 데이터베이스 입문", 초판 5쇄, 이지스퍼블리싱, 2021년

#DB #오라클 #doit #doit오라클

